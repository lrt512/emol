docker exec -it emol-app-1 poetry run python manage.py test
Found 271 test(s).
Creating test database for alias 'default'...
Migration completed: %s permissions fixed, %s permissions deleted 0 0
System check identified no issues (0 silenced).
[INFO] 2025-12-16 20:28:32,282 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:32,313 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:32,316 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:32,323 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
...[WARNING] 2025-12-16 20:28:32,348 django.request 253: Bad Request: /api/combatant/d1a7bfcb-a340-4686-bf70-7b471ace398b/
.[INFO] 2025-12-16 20:28:32,350 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:32,360 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
...[WARNING] 2025-12-16 20:28:32,519 django.request 253: Not Found: /api/initiate-pin-reset/
.[WARNING] 2025-12-16 20:28:32,525 django.request 253: Forbidden: /api/initiate-pin-reset/
.[WARNING] 2025-12-16 20:28:32,532 django.request 253: Bad Request: /api/initiate-pin-reset/
.[WARNING] 2025-12-16 20:28:32,539 django.request 253: Bad Request: /api/initiate-pin-reset/
.[WARNING] 2025-12-16 20:28:32,546 django.request 253: Forbidden: /api/initiate-pin-reset/
.[ERROR] 2025-12-16 20:28:32,659 django.request 253: Internal Server Error: /api/initiate-pin-reset/
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/opt/emol/emol/cards/api/pin.py", line 57, in post
    reset_code = combatant.initiate_pin_reset()
  File "/opt/emol/emol/cards/models/combatant.py", line 412, in initiate_pin_reset
    return self.one_time_codes.create_pin_reset_code()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 42, in create_pin_reset_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")
E[ERROR] 2025-12-16 20:28:32,783 django.request 253: Internal Server Error: /api/initiate-pin-reset/
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/opt/emol/emol/cards/api/pin.py", line 57, in post
    reset_code = combatant.initiate_pin_reset()
  File "/opt/emol/emol/cards/models/combatant.py", line 412, in initiate_pin_reset
    return self.one_time_codes.create_pin_reset_code()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 42, in create_pin_reset_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")
E[INFO] 2025-12-16 20:28:32,789 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
.[INFO] 2025-12-16 20:28:32,803 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
.[INFO] 2025-12-16 20:28:32,805 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-09-08
[INFO] 2025-12-16 20:28:32,811 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
.[INFO] 2025-12-16 20:28:32,815 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:32,817 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,817 cards 42: Card expiry notice
[INFO] 2025-12-16 20:28:32,817 cards 43: Greetings, Test Fighter!

Your Ealdormere authorizations for Test Combat have expired as of today.
To renew them, please see your local marshal or contact the Minister of
the Lists. Contact information for the Minister of the Lists can be found here:
http://www.ealdormere.ca/earl-marshal-deputies.html

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:32,819 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:32,821 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,821 cards 42: Card expiry reminder
[INFO] 2025-12-16 20:28:32,821 cards 43: Greetings, Test Fighter!

Your Ealdormere authorizations for Test Combat will expire in 30
days, on 2027-12-17. To renew them, please see your local marshal to fill
out the paperwork, then send it to the Minister of the Lists

You can send it by postal mail, or scan and email it. Contact information
for the Minister of the Lists can be found here:
http://www.ealdormere.ca/earl-marshal-deputies.html

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:32,822 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[ERROR] 2025-12-16 20:28:32,823 cards 32: Reminder <Orphaned Reminder: object_id=99999 - 30 day reminder> does not have a card
.[INFO] 2025-12-16 20:28:32,825 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:32,826 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,826 cards 42: Your authorization card
[INFO] 2025-12-16 20:28:32,826 cards 43: Greetings, Test Fighter!

Here is where you can view your authorization card online:
http://test.example.com/card/TEST123

This location does not change, so you can bookmark it.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:32,828 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,828 cards 42: Information update request
[INFO] 2025-12-16 20:28:32,828 cards 43: Greetings, Test Fighter!

We have received a request to update your information.
If you did not make the request, you can safely ignore this email.

To update your information, use this link:
/self-serve-update/bdacad76-b29f-4ff1-b9c8-0c81780c7612

This link will be usable for 24 hours from the time it was requested,
after which it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:32,830 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,830 cards 42: Your eMoL account has been temporarily locked
[INFO] 2025-12-16 20:28:32,830 cards 43: Greetings, Test Fighter!

Your eMoL account has been temporarily locked due to multiple incorrect PIN
attempts. This is a security measure to protect your information.

Your account will be automatically unlocked in 15 minutes.

If you did not make these attempts, please contact the Minister of the Lists
immediately, as someone may be trying to access your account.

If you have forgotten your PIN, please contact the Minister of the Lists to
request a PIN reset.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:32,832 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,832 cards 42: Final Notice: Set your eMoL PIN
[INFO] 2025-12-16 20:28:32,832 cards 43: Greetings, Test Fighter!

This is the final notice regarding your eMoL PIN.

You have not yet set your PIN, which is now required to access your
authorization card online. If you do not set a PIN, you will need to contact
the Minister of the Lists directly to access your card information.

Please set your PIN using the following link:
/pin/setup/bd7be8ca-b2c9-425f-b635-7b8e66e193a1

Your PIN must be 4-6 numeric digits.

If you have any questions or difficulties, please contact the Minister of the
Lists for assistance.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:32,833 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,833 cards 42: Action Required: Set your eMoL PIN
[INFO] 2025-12-16 20:28:32,833 cards 43: Greetings, Test Fighter!

To improve security, eMoL now requires a PIN to access your authorization card
and update your information.

Please set your PIN using the following link:
/pin/setup/314acb89-b8ef-4cad-9a2b-6eb5b7b5be20

Your PIN must be 4-6 numeric digits. Choose something you can remember, but
don't use obvious numbers like your birth year or 1234.

This link will expire in 24 hours. If it expires before you set your PIN,
you can request a new link from the eMoL website.

Ealdormere eMoL

.[ERROR] 2025-12-16 20:28:32,835 cards 228: Unknown PIN migration stage: invalid
.[INFO] 2025-12-16 20:28:32,836 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,836 cards 42: Reminder: Set your eMoL PIN
[INFO] 2025-12-16 20:28:32,836 cards 43: Greetings, Test Fighter!

This is a reminder that you still need to set your eMoL PIN.

To improve security, eMoL now requires a PIN to access your authorization card
and update your information. We sent you an email about this last week.

Please set your PIN using the following link:
/pin/setup/1c28f207-9c83-4edc-b62c-e95b7d0541a1

Your PIN must be 4-6 numeric digits. Choose something you can remember, but
don't use obvious numbers like your birth year or 1234.

This link will expire in 24 hours. If it expires before you set your PIN,
you can request a new link from the eMoL website.

Ealdormere eMoL

..[INFO] 2025-12-16 20:28:32,840 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,840 cards 42: Reset your eMoL PIN
[INFO] 2025-12-16 20:28:32,840 cards 43: Greetings, Test Fighter!

A PIN reset has been initiated for your eMoL account by the Minister of the
Lists.

Please set your new PIN using the following link:
/pin/reset/4dfb40a4-be96-4940-8bda-1e7768bd67ad

Your PIN must be 4-6 numeric digits. Choose something you can remember, but
don't use obvious numbers like your birth year or 1234.

This link will expire in 24 hours. If it expires before you set your PIN,
please contact the Minister of the Lists to request a new link.

Until you set a new PIN, you will not be able to access your authorization card.

Ealdormere eMoL

..[INFO] 2025-12-16 20:28:32,842 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,842 cards 42: Set your eMoL PIN
[INFO] 2025-12-16 20:28:32,842 cards 43: Greetings, Test Fighter!

To improve security, eMoL now requires a PIN to access your authorization card
and update your information.

Please set your PIN using the following link:
/pin/setup/7551d766-18f2-4358-a337-31395557bdcd

Your PIN must be 4-6 numeric digits. Choose something you can remember, but
don't use obvious numbers like your birth year or 1234.

This link will expire in 24 hours. If it expires before you set your PIN,
please contact the Minister of the Lists to request a new link.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:32,844 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,844 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:32,844 cards 43: Greetings, Test Fighter!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/osmZm2jo6jLveSWt

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[INFO] 2025-12-16 20:28:32,844 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,844 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:32,844 cards 43: Greetings, Test Fighter!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/osmZm2jo6jLveSWt

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:32,846 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
[INFO] 2025-12-16 20:28:32,848 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,848 cards 42: Waiver expiry notice
[INFO] 2025-12-16 20:28:32,848 cards 43: Greetings, Test Fighter!

The waiver you have on file with the Minister of the Lists has expired.
Until you file a new waiver with the Minister of the Lists, you will not
be able to participate in SCA combat activities.

You can find the waiver here:
http://www.ealdormere.ca/uploads/2/4/1/5/24151324/adult_waiver.pdf

Please print and fill one out, and then return it to the Minister of the Lists.

You can send it by postal mail, or scan and email it. Contact information
for the Minister of the Lists can be found here:
http://www.ealdormere.ca/earl-marshal-deputies.html

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:32,849 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
[INFO] 2025-12-16 20:28:32,851 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:32,851 cards 42: Waiver expiry reminder
[INFO] 2025-12-16 20:28:32,851 cards 43: Greetings, Test Fighter!

The waiver you have on file with the Minister of the Lists will expire in
30 days, on 2032-12-17. If your waiver expires, you will not
be able to participate in SCA combat activities until you file a new one.

You can find the waiver here:
http://www.ealdormere.ca/uploads/2/4/1/5/24151324/adult_waiver.pdf

Please print and fill one out, and then return it to the Minister of the Lists.

You can send it by postal mail, or scan and email it. Contact information
for the Minister of the Lists can be found here:
http://www.ealdormere.ca/earl-marshal-deputies.html

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:32,853 cards 40: Clean up OneTimeCodes (2025-12-16): Found 1 consumed
.[INFO] 2025-12-16 20:28:32,855 cards 32: Clean up OneTimeCodes (2025-12-16): Found 1 expired
.[INFO] 2025-12-16 20:28:32,857 cards 61: Clean up codes (2025-12-16): No codes to clean up
.[INFO] 2025-12-16 20:28:32,859 cards 61: Clean up codes (2025-12-16): No codes to clean up
.[INFO] 2025-12-16 20:28:32,861 cards 32: Clean up OneTimeCodes (2025-12-16): Found 2 expired
.[INFO] 2025-12-16 20:28:32,864 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:32,864 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:32,864 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/W6bqnC7WoSG8hQ5X

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

Found 1 combatants without PINs
[ERROR] 2025-12-16 20:28:32,965 cards 77: Failed to send email to test1@example.com: (1048, "Column 'combatant_id' cannot be null")
[31;1mError sending to test1@example.com: (1048, "Column 'combatant_id' cannot be null")
[0m[32;1mSent 0 initial emails[0m
E[INFO] 2025-12-16 20:28:32,977 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:32,977 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:32,977 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/7kIweURlkWPmcdCt

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

Found 1 combatants without PINs
Would send initial email to: test1@example.com
[32;1mWould send 1 initial emails[0m
.[INFO] 2025-12-16 20:28:33,090 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:33,090 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,090 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/OQpPwngBwaarmLIG

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:33,203 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:33,203 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,203 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/U4Ac6yPjsLOlCw0X

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:33,314 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:33,314 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,314 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/9MhG1VZloNJtqpxL

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:33,427 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:33,427 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,427 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/oUlecAdJ0vP5uZQc

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

Found 3 combatants without PINs
Limited to 1 combatants
[ERROR] 2025-12-16 20:28:33,532 cards 77: Failed to send email to test1@example.com: (1048, "Column 'combatant_id' cannot be null")
[31;1mError sending to test1@example.com: (1048, "Column 'combatant_id' cannot be null")
[0m[32;1mSent 0 initial emails[0m
E[INFO] 2025-12-16 20:28:33,543 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:33,543 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,543 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/HP41ieEqLyCyoAPm

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:33,657 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,658 cards 40: Update reminders for <Waiver: Test Fighter expires 2026-02-17
.[INFO] 2025-12-16 20:28:33,660 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,661 cards 40: Update reminders for <Waiver: Test Fighter expires 2026-02-17
.[INFO] 2025-12-16 20:28:33,663 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,664 cards 40: Update reminders for <Waiver: Test Fighter expires 2026-02-17
[INFO] 2025-12-16 20:28:33,665 cards 40: Update reminders for <Card: Test Fighter 2/Test Combat>
[INFO] 2025-12-16 20:28:33,666 cards 25: 🔍 DRY RUN MODE - No emails will be sent, no reminders will be deleted
[INFO] 2025-12-16 20:28:33,669 cards 56: Processing reminders for 2025-12-16: Found 7 due reminders to process.
[INFO] 2025-12-16 20:28:33,671 cards 85: [DRY RUN] Would send 0-day reminder for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,671 cards 120:    - [DRY RUN] Would delete 4 reminders for this object.
[INFO] 2025-12-16 20:28:33,672 cards 85: [DRY RUN] Would send 14-day reminder for <Card: Test Fighter 2/Test Combat>
[INFO] 2025-12-16 20:28:33,672 cards 120:    - [DRY RUN] Would delete 3 reminders for this object.
[INFO] 2025-12-16 20:28:33,672 cards 136: 🔍 DRY RUN: Would send 2 reminders and delete 7 total reminders.
.[INFO] 2025-12-16 20:28:33,674 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,674 cards 40: Update reminders for <Waiver: Test Fighter expires 2026-02-17
[INFO] 2025-12-16 20:28:33,676 cards 25: 🔍 DRY RUN MODE - No emails will be sent, no reminders will be deleted
[INFO] 2025-12-16 20:28:33,677 cards 56: Processing reminders for 2025-12-16: Found 3 due reminders to process.
[INFO] 2025-12-16 20:28:33,678 cards 85: [DRY RUN] Would send 30-day reminder for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,679 cards 120:    - [DRY RUN] Would delete 2 reminders for this object.
[INFO] 2025-12-16 20:28:33,679 cards 85: [DRY RUN] Would send 60-day reminder for <Waiver: Test Fighter expires 2026-02-17
[INFO] 2025-12-16 20:28:33,679 cards 120:    - [DRY RUN] Would delete 1 reminders for this object.
[INFO] 2025-12-16 20:28:33,679 cards 136: 🔍 DRY RUN: Would send 2 reminders and delete 3 total reminders.
.[INFO] 2025-12-16 20:28:33,680 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,681 cards 40: Update reminders for <Waiver: Test Fighter expires 2026-02-17
[INFO] 2025-12-16 20:28:33,683 cards 56: Processing reminders for 2025-12-16: Found 0 due reminders to process.
.[INFO] 2025-12-16 20:28:33,684 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,685 cards 40: Update reminders for <Waiver: Test Fighter expires 2026-02-17
[INFO] 2025-12-16 20:28:33,687 cards 44: Cleaning up 1 orphaned reminders...
[INFO] 2025-12-16 20:28:33,687 cards 48: Deleted 1 orphaned reminders.
[INFO] 2025-12-16 20:28:33,688 cards 56: Processing reminders for 2025-12-16: Found 1 due reminders to process.
[INFO] 2025-12-16 20:28:33,689 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:33,689 cards 42: Card expiry reminder
[INFO] 2025-12-16 20:28:33,689 cards 43: Greetings, Test Fighter!

Your Ealdormere authorizations for Test Combat will expire in 60
days, on 2026-01-17. To renew them, please see your local marshal to fill
out the paperwork, then send it to the Minister of the Lists

You can send it by postal mail, or scan and email it. Contact information
for the Minister of the Lists can be found here:
http://www.ealdormere.ca/earl-marshal-deputies.html

Ealdormere eMoL

[INFO] 2025-12-16 20:28:33,689 cards 93: Sent 60-day reminder for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,689 cards 130:    - Cleaned up 4 reminders for this object.
[INFO] 2025-12-16 20:28:33,689 cards 142: ✅ Sent 1 reminders and cleaned up 4 total reminders.
.[INFO] 2025-12-16 20:28:33,690 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,691 cards 40: Update reminders for <Waiver: Test Fighter expires 2026-02-17
[INFO] 2025-12-16 20:28:33,692 cards 25: 🔍 DRY RUN MODE - No emails will be sent, no reminders will be deleted
[INFO] 2025-12-16 20:28:33,693 cards 36: 🗑️  Would clean up 1 orphaned reminders
[INFO] 2025-12-16 20:28:33,693 cards 38:    - Would delete orphaned reminder ID 128 (object_id=99999)
[INFO] 2025-12-16 20:28:33,694 cards 56: Processing reminders for 2025-12-16: Found 2 due reminders to process.
[INFO] 2025-12-16 20:28:33,694 cards 85: [DRY RUN] Would send 60-day reminder for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,695 cards 120:    - [DRY RUN] Would delete 1 reminders for this object.
[INFO] 2025-12-16 20:28:33,695 cards 136: 🔍 DRY RUN: Would send 1 reminders and delete 1 total reminders.
.[INFO] 2025-12-16 20:28:33,696 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,696 cards 40: Update reminders for <Waiver: Test Fighter expires 2026-02-17
[INFO] 2025-12-16 20:28:33,700 cards 56: Processing reminders for 2025-12-16: Found 3 due reminders to process.
[INFO] 2025-12-16 20:28:33,701 cards 93: Sent 14-day reminder for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,701 cards 130:    - Cleaned up 4 reminders for this object.
[INFO] 2025-12-16 20:28:33,701 cards 142: ✅ Sent 1 reminders and cleaned up 4 total reminders.
.[INFO] 2025-12-16 20:28:33,703 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,703 cards 40: Update reminders for <Waiver: Test Fighter expires 2026-02-17
[INFO] 2025-12-16 20:28:33,704 cards 41: Not sending email to noprivacy@example.com
[INFO] 2025-12-16 20:28:33,704 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,704 cards 43: Greetings, No Privacy Fighter!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/AtK6oUhVaAIjQWwo

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[INFO] 2025-12-16 20:28:33,705 cards 40: Update reminders for <Card: No Privacy Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,706 cards 25: 🔍 DRY RUN MODE - No emails will be sent, no reminders will be deleted
[INFO] 2025-12-16 20:28:33,708 cards 56: Processing reminders for 2025-12-16: Found 3 due reminders to process.
[INFO] 2025-12-16 20:28:33,709 cards 85: [DRY RUN] Would send 60-day reminder for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:33,709 cards 120:    - [DRY RUN] Would delete 1 reminders for this object.
[INFO] 2025-12-16 20:28:33,710 cards 107: [DRY RUN] Would skip 30-day reminder for <Card: No Privacy Fighter/Test Combat> (email criteria not met).
[INFO] 2025-12-16 20:28:33,710 cards 120:    - [DRY RUN] Would delete 2 reminders for this object.
[INFO] 2025-12-16 20:28:33,710 cards 136: 🔍 DRY RUN: Would send 1 reminders and delete 3 total reminders.
..[INFO] 2025-12-16 20:28:33,713 cards 40: Update reminders for <Card: Test Fighter 1/Armoured Combat>
[INFO] 2025-12-16 20:28:33,714 cards 54: Expiry summary for next week (2025-12-17 to 2025-12-24)
[INFO] 2025-12-16 20:28:33,715 cards 86: 📊 SUMMARY: 1 total expiries (1 cards, 0 waivers)
[INFO] 2025-12-16 20:28:33,715 cards 99: 🃏 CARDS EXPIRING: 1 cards
[INFO] 2025-12-16 20:28:33,715 cards 111:    Armoured Combat: 1 cards
[INFO] 2025-12-16 20:28:33,715 cards 143: 📅 REMINDER SCHEDULE: [60, 30, 14, 0] days before expiry
[INFO] 2025-12-16 20:28:33,716 cards 193: 📬 REMINDERS TO SEND: No reminders scheduled during next week
[INFO] 2025-12-16 20:28:33,716 cards 198: ✅ Expiry summary complete for next week
[INFO] 2025-12-16 20:28:33,716 cards 54: Expiry summary for 6 days (2025-12-17 to 2025-12-23)
[INFO] 2025-12-16 20:28:33,717 cards 86: 📊 SUMMARY: 0 total expiries (0 cards, 0 waivers)
[INFO] 2025-12-16 20:28:33,717 cards 94: ✅ No expiries found in the specified period
.[INFO] 2025-12-16 20:28:33,718 cards 40: Update reminders for <Card: Test Fighter 1/Armoured Combat>
[INFO] 2025-12-16 20:28:33,719 cards 40: Update reminders for <Card: Test Fighter 2/Armoured Combat>
[INFO] 2025-12-16 20:28:33,720 cards 40: Update reminders for <Card: Test Fighter 3/Fencing>
[INFO] 2025-12-16 20:28:33,721 cards 54: Expiry summary for next week (2025-12-17 to 2025-12-24)
[INFO] 2025-12-16 20:28:33,722 cards 86: 📊 SUMMARY: 3 total expiries (3 cards, 0 waivers)
[INFO] 2025-12-16 20:28:33,722 cards 99: 🃏 CARDS EXPIRING: 3 cards
[INFO] 2025-12-16 20:28:33,723 cards 111:    Armoured Combat: 2 cards
[INFO] 2025-12-16 20:28:33,723 cards 111:    Fencing: 1 cards
[INFO] 2025-12-16 20:28:33,723 cards 115: 📋 Detailed card expiries:
[INFO] 2025-12-16 20:28:33,723 cards 117:    2025-12-21:
[INFO] 2025-12-16 20:28:33,723 cards 119:       Test Fighter 1 - Armoured Combat
[INFO] 2025-12-16 20:28:33,723 cards 117:    2025-12-23:
[INFO] 2025-12-16 20:28:33,723 cards 119:       Test Fighter 2 - Armoured Combat
[INFO] 2025-12-16 20:28:33,723 cards 117:    2025-12-24:
[INFO] 2025-12-16 20:28:33,723 cards 119:       Test Fighter 3 - Fencing
[INFO] 2025-12-16 20:28:33,723 cards 143: 📅 REMINDER SCHEDULE: [60, 30, 14, 0] days before expiry
[INFO] 2025-12-16 20:28:33,723 cards 175: 📬 REMINDERS TO SEND: 3 total reminders during next week
[INFO] 2025-12-16 20:28:33,723 cards 185:    0-day reminders: 3 (waiver: 0, card: 3)
[INFO] 2025-12-16 20:28:33,723 cards 198: ✅ Expiry summary complete for next week
..[INFO] 2025-12-16 20:28:33,726 cards 40: Update reminders for <Card: Test Fighter 1/Armoured Combat>
[INFO] 2025-12-16 20:28:33,727 cards 40: Update reminders for <Card: Test Fighter 2/Fencing>
[INFO] 2025-12-16 20:28:33,728 cards 54: Expiry summary for 14 days (2025-12-17 to 2025-12-31)
[INFO] 2025-12-16 20:28:33,729 cards 86: 📊 SUMMARY: 1 total expiries (1 cards, 0 waivers)
[INFO] 2025-12-16 20:28:33,729 cards 99: 🃏 CARDS EXPIRING: 1 cards
[INFO] 2025-12-16 20:28:33,729 cards 111:    Armoured Combat: 1 cards
[INFO] 2025-12-16 20:28:33,729 cards 143: 📅 REMINDER SCHEDULE: [60, 30, 14, 0] days before expiry
[INFO] 2025-12-16 20:28:33,730 cards 175: 📬 REMINDERS TO SEND: 1 total reminders during 14 days
[INFO] 2025-12-16 20:28:33,730 cards 185:    0-day reminders: 1 (waiver: 0, card: 1)
[INFO] 2025-12-16 20:28:33,730 cards 198: ✅ Expiry summary complete for 14 days
.[INFO] 2025-12-16 20:28:33,731 cards 40: Update reminders for <Card: Test Fighter 1/Armoured Combat>
[INFO] 2025-12-16 20:28:33,732 cards 40: Update reminders for <Card: Test Fighter 2/Fencing>
[INFO] 2025-12-16 20:28:33,733 cards 54: Expiry summary for next week (2025-12-17 to 2025-12-24)
[INFO] 2025-12-16 20:28:33,734 cards 86: 📊 SUMMARY: 1 total expiries (1 cards, 0 waivers)
[INFO] 2025-12-16 20:28:33,734 cards 99: 🃏 CARDS EXPIRING: 1 cards
[INFO] 2025-12-16 20:28:33,734 cards 111:    Armoured Combat: 1 cards
[INFO] 2025-12-16 20:28:33,734 cards 143: 📅 REMINDER SCHEDULE: [60, 30, 14, 0] days before expiry
[INFO] 2025-12-16 20:28:33,735 cards 175: 📬 REMINDERS TO SEND: 1 total reminders during next week
[INFO] 2025-12-16 20:28:33,735 cards 185:    0-day reminders: 1 (waiver: 0, card: 1)
[INFO] 2025-12-16 20:28:33,735 cards 198: ✅ Expiry summary complete for next week
.[INFO] 2025-12-16 20:28:33,737 cards 40: Update reminders for <Card: Test Fighter 1/Armoured Combat>
[INFO] 2025-12-16 20:28:33,738 cards 40: Update reminders for <Waiver: Test Fighter 2 expires 2025-12-22
[INFO] 2025-12-16 20:28:33,738 cards 54: Expiry summary for next week (2025-12-17 to 2025-12-24)
[INFO] 2025-12-16 20:28:33,739 cards 86: 📊 SUMMARY: 2 total expiries (1 cards, 1 waivers)
[INFO] 2025-12-16 20:28:33,739 cards 99: 🃏 CARDS EXPIRING: 1 cards
[INFO] 2025-12-16 20:28:33,740 cards 111:    Armoured Combat: 1 cards
[INFO] 2025-12-16 20:28:33,740 cards 115: 📋 Detailed card expiries:
[INFO] 2025-12-16 20:28:33,740 cards 117:    2025-12-23:
[INFO] 2025-12-16 20:28:33,740 cards 119:       Test Fighter 1 - Armoured Combat
[INFO] 2025-12-16 20:28:33,740 cards 127: 📋 WAIVERS EXPIRING: 1 waivers
[INFO] 2025-12-16 20:28:33,740 cards 135: 📋 Detailed waiver expiries:
[INFO] 2025-12-16 20:28:33,740 cards 137:    2025-12-22:
[INFO] 2025-12-16 20:28:33,740 cards 139:       Test Fighter 2
[INFO] 2025-12-16 20:28:33,740 cards 143: 📅 REMINDER SCHEDULE: [60, 30, 14, 0] days before expiry
[INFO] 2025-12-16 20:28:33,740 cards 175: 📬 REMINDERS TO SEND: 2 total reminders during next week
[INFO] 2025-12-16 20:28:33,740 cards 185:    0-day reminders: 2 (waiver: 1, card: 1)
[INFO] 2025-12-16 20:28:33,740 cards 198: ✅ Expiry summary complete for next week
.[INFO] 2025-12-16 20:28:33,742 cards 40: Update reminders for <Card: Test Fighter 1/Armoured Combat>
[INFO] 2025-12-16 20:28:33,743 cards 40: Update reminders for <Card: Test Fighter 2/Fencing>
[INFO] 2025-12-16 20:28:33,744 cards 54: Expiry summary for next day (2025-12-17 to 2025-12-18)
[INFO] 2025-12-16 20:28:33,745 cards 86: 📊 SUMMARY: 1 total expiries (1 cards, 0 waivers)
[INFO] 2025-12-16 20:28:33,745 cards 99: 🃏 CARDS EXPIRING: 1 cards
[INFO] 2025-12-16 20:28:33,745 cards 111:    Armoured Combat: 1 cards
[INFO] 2025-12-16 20:28:33,745 cards 143: 📅 REMINDER SCHEDULE: [60, 30, 14, 0] days before expiry
[INFO] 2025-12-16 20:28:33,746 cards 193: 📬 REMINDERS TO SEND: No reminders scheduled during next day
[INFO] 2025-12-16 20:28:33,746 cards 198: ✅ Expiry summary complete for next day
[INFO] 2025-12-16 20:28:33,746 cards 54: Expiry summary for next week (2025-12-17 to 2025-12-24)
[INFO] 2025-12-16 20:28:33,746 cards 86: 📊 SUMMARY: 1 total expiries (1 cards, 0 waivers)
[INFO] 2025-12-16 20:28:33,747 cards 99: 🃏 CARDS EXPIRING: 1 cards
[INFO] 2025-12-16 20:28:33,747 cards 111:    Armoured Combat: 1 cards
[INFO] 2025-12-16 20:28:33,747 cards 143: 📅 REMINDER SCHEDULE: [60, 30, 14, 0] days before expiry
[INFO] 2025-12-16 20:28:33,747 cards 175: 📬 REMINDERS TO SEND: 1 total reminders during next week
[INFO] 2025-12-16 20:28:33,748 cards 185:    0-day reminders: 1 (waiver: 0, card: 1)
[INFO] 2025-12-16 20:28:33,748 cards 198: ✅ Expiry summary complete for next week
[INFO] 2025-12-16 20:28:33,748 cards 54: Expiry summary for next month (2025-12-17 to 2026-01-16)
[INFO] 2025-12-16 20:28:33,748 cards 86: 📊 SUMMARY: 2 total expiries (2 cards, 0 waivers)
[INFO] 2025-12-16 20:28:33,748 cards 99: 🃏 CARDS EXPIRING: 2 cards
[INFO] 2025-12-16 20:28:33,749 cards 111:    Armoured Combat: 1 cards
[INFO] 2025-12-16 20:28:33,749 cards 111:    Fencing: 1 cards
[INFO] 2025-12-16 20:28:33,749 cards 143: 📅 REMINDER SCHEDULE: [60, 30, 14, 0] days before expiry
[INFO] 2025-12-16 20:28:33,749 cards 175: 📬 REMINDERS TO SEND: 3 total reminders during next month
[INFO] 2025-12-16 20:28:33,749 cards 185:    0-day reminders: 2 (waiver: 0, card: 2)
[INFO] 2025-12-16 20:28:33,749 cards 185:    14-day reminders: 1 (waiver: 0, card: 1)
[INFO] 2025-12-16 20:28:33,749 cards 198: ✅ Expiry summary complete for next month
.[INFO] 2025-12-16 20:28:33,751 cards 40: Update reminders for <Card: Test Fighter 1/Armoured Combat>
[INFO] 2025-12-16 20:28:33,752 cards 40: Update reminders for <Waiver: Test Fighter 2 expires 2025-12-22
[INFO] 2025-12-16 20:28:33,753 cards 54: Expiry summary for next week (2025-12-17 to 2025-12-24)
[INFO] 2025-12-16 20:28:33,754 cards 86: 📊 SUMMARY: 2 total expiries (1 cards, 1 waivers)
[INFO] 2025-12-16 20:28:33,754 cards 99: 🃏 CARDS EXPIRING: 1 cards
[INFO] 2025-12-16 20:28:33,754 cards 111:    Armoured Combat: 1 cards
[INFO] 2025-12-16 20:28:33,754 cards 115: 📋 Detailed card expiries:
[INFO] 2025-12-16 20:28:33,754 cards 117:    2025-12-22:
[INFO] 2025-12-16 20:28:33,754 cards 119:       Test Fighter 1 - Armoured Combat
[INFO] 2025-12-16 20:28:33,754 cards 127: 📋 WAIVERS EXPIRING: 1 waivers
[INFO] 2025-12-16 20:28:33,755 cards 135: 📋 Detailed waiver expiries:
[INFO] 2025-12-16 20:28:33,755 cards 137:    2025-12-22:
[INFO] 2025-12-16 20:28:33,755 cards 139:       Test Fighter 2
[INFO] 2025-12-16 20:28:33,755 cards 143: 📅 REMINDER SCHEDULE: [60, 30, 14, 0] days before expiry
[INFO] 2025-12-16 20:28:33,755 cards 175: 📬 REMINDERS TO SEND: 2 total reminders during next week
[INFO] 2025-12-16 20:28:33,755 cards 185:    0-day reminders: 2 (waiver: 1, card: 1)
[INFO] 2025-12-16 20:28:33,755 cards 198: ✅ Expiry summary complete for next week
.[INFO] 2025-12-16 20:28:33,757 cards 40: Update reminders for <Card: Test Fighter 1/Armoured Combat>
[INFO] 2025-12-16 20:28:33,757 cards 40: Update reminders for <Waiver: Test Fighter 2 expires 2032-09-08
[INFO] 2025-12-16 20:28:33,758 cards 54: Expiry summary for next week (2025-12-17 to 2025-12-24)
[INFO] 2025-12-16 20:28:33,759 cards 86: 📊 SUMMARY: 0 total expiries (0 cards, 0 waivers)
[INFO] 2025-12-16 20:28:33,759 cards 94: ✅ No expiries found in the specified period
.[INFO] 2025-12-16 20:28:33,761 cards 40: Update reminders for <Waiver: Test Fighter 1 expires 2025-12-21
[INFO] 2025-12-16 20:28:33,761 cards 40: Update reminders for <Waiver: Test Fighter 2 expires 2025-12-25
[INFO] 2025-12-16 20:28:33,762 cards 54: Expiry summary for next week (2025-12-17 to 2025-12-24)
[INFO] 2025-12-16 20:28:33,763 cards 86: 📊 SUMMARY: 2 total expiries (0 cards, 2 waivers)
[INFO] 2025-12-16 20:28:33,763 cards 127: 📋 WAIVERS EXPIRING: 2 waivers
[INFO] 2025-12-16 20:28:33,764 cards 135: 📋 Detailed waiver expiries:
[INFO] 2025-12-16 20:28:33,764 cards 137:    2025-12-21:
[INFO] 2025-12-16 20:28:33,764 cards 139:       Test Fighter 1
[INFO] 2025-12-16 20:28:33,764 cards 137:    2025-12-25:
[INFO] 2025-12-16 20:28:33,764 cards 139:       Test Fighter 2
[INFO] 2025-12-16 20:28:33,764 cards 143: 📅 REMINDER SCHEDULE: [60, 30, 14, 0] days before expiry
[INFO] 2025-12-16 20:28:33,764 cards 175: 📬 REMINDERS TO SEND: 1 total reminders during next week
[INFO] 2025-12-16 20:28:33,764 cards 185:    0-day reminders: 1 (waiver: 1, card: 0)
[INFO] 2025-12-16 20:28:33,764 cards 198: ✅ Expiry summary complete for next week
.[INFO] 2025-12-16 20:28:33,766 cards 41: Not sending email to family@example.com
[INFO] 2025-12-16 20:28:33,766 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,766 cards 43: Greetings, Fighter One!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/1Nwr0vaeYGHPpkZ9

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[INFO] 2025-12-16 20:28:33,766 cards 41: Not sending email to family@example.com
[INFO] 2025-12-16 20:28:33,766 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,766 cards 43: Greetings, Fighter Two!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/R0jPE1gvas9UtEl1

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[INFO] 2025-12-16 20:28:33,767 cards 41: Not sending email to other@example.com
[INFO] 2025-12-16 20:28:33,767 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,767 cards 43: Greetings, Fighter Three!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/Cw3UO2zgHMLlaXDL

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:33,768 cards 41: Not sending email to shared@example.com
[INFO] 2025-12-16 20:28:33,768 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,768 cards 43: Greetings, Fighter One!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/9yEUZhMkG6VKwe7Z

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[INFO] 2025-12-16 20:28:33,769 cards 41: Not sending email to shared@example.com
[INFO] 2025-12-16 20:28:33,769 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,769 cards 43: Greetings, Fighter Two!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/ILZKgcI31j9Yjo1l

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:33,770 cards 41: Not sending email to 
[INFO] 2025-12-16 20:28:33,770 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,770 cards 43: Greetings, John the Blue!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/fc5SoOqg6OowLOjm

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:33,772 cards 41: Not sending email to 
[INFO] 2025-12-16 20:28:33,772 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,772 cards 43: Greetings, John the Blue!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/qNmAif8R59CRzRQW

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[INFO] 2025-12-16 20:28:33,772 cards 40: Update reminders for <Waiver: John the Blue expires 2025-01-01 00:00:00
.[INFO] 2025-12-16 20:28:33,775 cards 41: Not sending email to 
[INFO] 2025-12-16 20:28:33,775 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:33,775 cards 43: Greetings, John the Blue!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/4jRFo62aBfvO273F

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

..[WARNING] 2025-12-16 20:28:34,082 cards 354: PIN check attempted for locked out combatant test@example.com
...[WARNING] 2025-12-16 20:28:34,508 cards 360: PIN check attempted for combatant test@example.com with no PIN set
......E...[WARNING] 2025-12-16 20:28:35,849 cards 374: Combatant test@example.com locked out after 5 failed PIN attempts
[INFO] 2025-12-16 20:28:35,849 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:35,849 cards 42: Your eMoL account has been temporarily locked
[INFO] 2025-12-16 20:28:35,849 cards 43: Greetings, Test Fighter!

Your eMoL account has been temporarily locked due to multiple incorrect PIN
attempts. This is a security measure to protect your information.

Your account will be automatically unlocked in 15 minutes.

If you did not make these attempts, please contact the Minister of the Lists
immediately, as someone may be trying to access your account.

If you have forgotten your PIN, please contact the Minister of the Lists to
request a PIN reset.

Ealdormere eMoL

.[WARNING] 2025-12-16 20:28:36,457 cards 374: Combatant test@example.com locked out after 5 failed PIN attempts
....................[ERROR] 2025-12-16 20:28:36,823 cards 113: Discipline 'None' does not exist
...[ERROR] 2025-12-16 20:28:36,826 cards 113: Discipline 'invalid_discipline' does not exist
.[ERROR] 2025-12-16 20:28:36,827 cards 95: Permission 'invalid_permission' does not exist
..............[INFO] 2025-12-16 20:28:36,843 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:36,845 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:36,846 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:36,848 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:36,850 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
Reminder hygiene check (2025-12-17)
Expected reminder days: [60, 30, 14, 0]

Checking %s active %s...cardsE[INFO] 2025-12-16 20:28:36,854 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
Reminder hygiene check (2025-12-17)
Expected reminder days: [60, 30, 14, 0]

E[INFO] 2025-12-16 20:28:36,857 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
Reminder hygiene check (2025-12-17)
Expected reminder days: [60, 30, 14, 0]

Checking %s active %s...cardsChecking %s active %s...waiversChecking for orphaned reminders...

[32;1m✓ No issues found[0m
.[INFO] 2025-12-16 20:28:36,861 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
Reminder hygiene check (2025-12-17)
Expected reminder days: [60, 30, 14, 0]

E[INFO] 2025-12-16 20:28:36,863 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
Reminder hygiene check (2025-12-17)
Expected reminder days: [60, 30, 14, 0]

EReminder hygiene check (2025-12-17)
Expected reminder days: [60, 30, 14, 0]

Checking %s active %s...cardsChecking %s active %s...waiversChecking for orphaned reminders...
E[INFO] 2025-12-16 20:28:36,869 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:36,871 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:36,873 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:36,874 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:36,877 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:36,879 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:36,882 cards 41: Not sending email to noprivacy@example.com
[INFO] 2025-12-16 20:28:36,882 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:36,882 cards 43: Greetings, No Privacy!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/evBoQUSULjTlGkap

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[INFO] 2025-12-16 20:28:36,882 cards 40: Update reminders for <Card: No Privacy/Test Combat>
[INFO] 2025-12-16 20:28:36,884 cards 76: Not sending reminder for <Card: No Privacy - 60 day reminder>
.[INFO] 2025-12-16 20:28:36,885 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[WARNING] 2025-12-16 20:28:36,887 cards 58: Reminder 294 has no content_object (orphaned reminder)
.[INFO] 2025-12-16 20:28:36,889 cards 41: Not sending email to noprivacy@example.com
[INFO] 2025-12-16 20:28:36,889 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:36,889 cards 43: Greetings, No Privacy!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/Xsn3fJputmSg03pY

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[INFO] 2025-12-16 20:28:36,889 cards 40: Update reminders for <Card: No Privacy/Test Combat>
.[INFO] 2025-12-16 20:28:36,891 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
.[INFO] 2025-12-16 20:28:36,894 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:36,897 cards 56: Processing reminders for 2025-12-16: Found 4 due reminders to process.
[INFO] 2025-12-16 20:28:36,899 cards 93: Sent 0-day reminder for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:36,899 cards 130:    - Cleaned up 4 reminders for this object.
[INFO] 2025-12-16 20:28:36,899 cards 142: ✅ Sent 1 reminders and cleaned up 4 total reminders.
.[INFO] 2025-12-16 20:28:36,901 cards 40: Update reminders for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:36,904 cards 56: Processing reminders for 2025-12-16: Found 4 due reminders to process.
[WARNING] 2025-12-16 20:28:36,905 cards 99: Failed to send 0-day reminder for <Card: Test Fighter/Test Combat>
[INFO] 2025-12-16 20:28:36,906 cards 115:    - Keeping reminders for retry tomorrow.
[INFO] 2025-12-16 20:28:36,906 cards 142: ✅ Sent 0 reminders and cleaned up 0 total reminders.
.[INFO] 2025-12-16 20:28:36,907 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
.[INFO] 2025-12-16 20:28:36,909 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-09-08
[INFO] 2025-12-16 20:28:36,910 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
................[INFO] 2025-12-16 20:28:36,938 cards 34: has_global_permission: write_combatant_info override: True reason: self-serve update
.[ERROR] 2025-12-16 20:28:36,946 cards 135: Self-serve update failed for code cc839fa8-7eab-4ff7-b2a7-3070b72931dd with errors: {'member_number': [ErrorDetail(string='Member number is required when specifying an expiry date.', code='invalid')]}
[INFO] 2025-12-16 20:28:36,946 cards 34: has_global_permission: write_combatant_info override: True reason: self-serve update
..FF[INFO] 2025-12-16 20:28:36,974 cards 34: has_global_permission: write_combatant_info override: True reason: self-serve update
.[INFO] 2025-12-16 20:28:36,982 cards 143: Successfully updated combatant information for code b85674d2-f645-4b40-8ad8-5f3512abf762, combatant_id: 191
.F[ERROR] 2025-12-16 20:28:36,996 cards 135: Self-serve update failed for code 6016a69f-56d9-4020-94e1-a9cd733205b3 with errors: {'member_number': [ErrorDetail(string='Member number is required when specifying an expiry date.', code='invalid')]}
[INFO] 2025-12-16 20:28:36,996 cards 34: has_global_permission: write_combatant_info override: True reason: self-serve update
.[ERROR] 2025-12-16 20:28:37,004 cards 135: Self-serve update failed for code 623190f0-ed40-4dbe-97fe-ed6523fa0fec with errors: {'member_number': [ErrorDetail(string='Member number is required when specifying an expiry date.', code='invalid')]}
[INFO] 2025-12-16 20:28:37,005 cards 34: has_global_permission: write_combatant_info override: True reason: self-serve update
.[INFO] 2025-12-16 20:28:37,013 cards 143: Successfully updated combatant information for code 9f2e59f3-7df2-4764-8e69-367aa950c74f, combatant_id: 195
.[INFO] 2025-12-16 20:28:37,021 cards 143: Successfully updated combatant information for code 39b356bc-c9b1-458c-9d3c-ff17c16a9a34, combatant_id: 196
.[INFO] 2025-12-16 20:28:37,029 cards 143: Successfully updated combatant information for code 30261007-0d90-4a01-b381-be151dde76d6, combatant_id: 197
.[ERROR] 2025-12-16 20:28:37,037 cards 135: Self-serve update failed for code 0e7b8c63-e3cc-44e2-9fb8-42021cd84813 with errors: {'member_number': [ErrorDetail(string='Member number is required when specifying an expiry date.', code='invalid')]}
[INFO] 2025-12-16 20:28:37,037 cards 34: has_global_permission: write_combatant_info override: True reason: self-serve update
....[INFO] 2025-12-16 20:28:37,040 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,040 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,040 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/F8Z2JRTcV5Kx4jfe

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,045 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
.[INFO] 2025-12-16 20:28:37,047 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,047 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,047 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/OuWv97HFgMZXMtrg

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,052 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
.[INFO] 2025-12-16 20:28:37,055 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,055 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,055 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/5DbiLmUal0GudFy2

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,060 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
[ERROR] 2025-12-16 20:28:37,061 cards 88: Card request for <Combatant: test2@example.com (Test Fighter 2)> (privacy not accepted)
.[INFO] 2025-12-16 20:28:37,063 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,063 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,063 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/xoWhUHrZgz8fK7cl

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,068 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
[ERROR] 2025-12-16 20:28:37,068 cards 98: Card URL request: No combatant for None
.[INFO] 2025-12-16 20:28:37,070 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,070 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,070 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/lmH5l8HFND3xPmiL

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,075 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
[ERROR] 2025-12-16 20:28:37,075 cards 98: Card URL request: No combatant for nonexistent@example.com
.[INFO] 2025-12-16 20:28:37,077 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,077 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,077 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/QhwnyNLZsAghRajz

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,083 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
.[INFO] 2025-12-16 20:28:37,086 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,086 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,086 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/X9KiKe2QftfZx3RJ

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,091 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
[ERROR] 2025-12-16 20:28:37,092 django.request 253: Internal Server Error: /update-info
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/utils/decorators.py", line 192, in _view_wrapper
    result = _process_exception(request, e)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/utils/decorators.py", line 190, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/decorators/http.py", line 64, in inner
    return func(request, *args, **kwargs)
  File "/opt/emol/emol/cards/views/home.py", line 140, in update_info
    code = combatant.one_time_codes.create_info_update_code()
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 22, in create_info_update_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")
E[INFO] 2025-12-16 20:28:37,096 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,096 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,096 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/M9HQuAb6Bi9iFLMp

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,101 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
[ERROR] 2025-12-16 20:28:37,102 django.request 253: Internal Server Error: /update-info
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/utils/decorators.py", line 192, in _view_wrapper
    result = _process_exception(request, e)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/utils/decorators.py", line 190, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/decorators/http.py", line 64, in inner
    return func(request, *args, **kwargs)
  File "/opt/emol/emol/cards/views/home.py", line 140, in update_info
    code = combatant.one_time_codes.create_info_update_code()
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 22, in create_info_update_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")
E[INFO] 2025-12-16 20:28:37,107 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,107 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,107 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/QJ4jbER5iX6n4bOP

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,112 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
[ERROR] 2025-12-16 20:28:37,112 cards 144: Card request for <Combatant: test2@example.com (Test Fighter 2)> (privacy not accepted)
.[INFO] 2025-12-16 20:28:37,114 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,114 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,114 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/Ry4rTE1QyPMGJtlg

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,119 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
[WARNING] 2025-12-16 20:28:37,120 cards 157: No combatant found with email None
.[INFO] 2025-12-16 20:28:37,122 cards 41: Not sending email to test2@example.com
[INFO] 2025-12-16 20:28:37,122 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:37,122 cards 43: Greetings, Test Fighter 2!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/LupooQLrsldAGwsT

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:37,126 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
[WARNING] 2025-12-16 20:28:37,127 cards 157: No combatant found with email nonexistent@example.com
.[INFO] 2025-12-16 20:28:37,129 cards 40: Update reminders for <Card: Test Marshal/Test Discipline>
[INFO] 2025-12-16 20:28:37,138 cards 172: Fetching marshal list
.[INFO] 2025-12-16 20:28:37,141 cards 40: Update reminders for <Card: Test Marshal/Test Discipline>
[INFO] 2025-12-16 20:28:37,146 cards 172: Fetching marshal list
.[INFO] 2025-12-16 20:28:37,149 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
.[INFO] 2025-12-16 20:28:37,272 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
.[INFO] 2025-12-16 20:28:37,379 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
.[INFO] 2025-12-16 20:28:37,387 cards 40: Update reminders for <Waiver: Test Fighter expires 2032-12-17
..[INFO] 2025-12-16 20:28:37,833 cards 162: PIN reset successfully for combatant test@example.com
........[INFO] 2025-12-16 20:28:38,200 cards 72: PIN set successfully for combatant test@example.com
..........[INFO] 2025-12-16 20:28:39,782 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:39,782 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:39,782 cards 43: Greetings, Test Fighter!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/U5KYB9zrFjXnmYiV

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[INFO] 2025-12-16 20:28:39,788 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:39,789 cards 42: Your authorization card
[INFO] 2025-12-16 20:28:39,789 cards 43: Greetings, Test Fighter!

Here is where you can view your authorization card online:
http://localhost:8000/card/fish-statant-sable

This location does not change, so you can bookmark it.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:39,789 feature_switches.helpers 39: Feature switch 'pin_authentication' does not exist, using default='False'
.[INFO] 2025-12-16 20:28:39,791 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:39,791 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:39,791 cards 43: Greetings, Test Fighter!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/TjSlID5GlIXNSQsX

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[INFO] 2025-12-16 20:28:39,797 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:39,798 cards 42: Your authorization card
[INFO] 2025-12-16 20:28:39,798 cards 43: Greetings, Test Fighter!

Here is where you can view your authorization card online:
http://localhost:8000/card/barry-gauntlet-or

This location does not change, so you can bookmark it.

Ealdormere eMoL

[ERROR] 2025-12-16 20:28:39,798 django.request 253: Internal Server Error: /privacy-policy/TjSlID5GlIXNSQsX
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/decorators/http.py", line 64, in inner
    return func(request, *args, **kwargs)
  File "/opt/emol/emol/cards/views/privacy.py", line 34, in privacy_policy
    pin_code = combatant.one_time_codes.create_pin_setup_code()
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 32, in create_pin_setup_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")
E[INFO] 2025-12-16 20:28:39,803 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:39,803 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:39,803 cards 43: Greetings, Test Fighter!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/APAnBgWLg5II0zNP

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:39,811 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:39,811 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:39,811 cards 43: Greetings, Test Fighter!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/a1BdgdpHz1c8cf09

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

[WARNING] 2025-12-16 20:28:39,816 django.request 253: Not Found: /privacy-policy/invalid
.[INFO] 2025-12-16 20:28:39,817 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:39,817 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:39,817 cards 43: Greetings, Test Fighter!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/iH6df1cYkjR0tEBE

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.[INFO] 2025-12-16 20:28:39,832 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:39,832 cards 42: Welcome to Ealdormere eMoL!
[INFO] 2025-12-16 20:28:39,832 cards 43: Greetings, Test Fighter!

Congratulations on your authorization!

Now, let's get your authorization card in order...

Ealdormere has moved to a fully-online card management system, the
Electronic Minister of the Lists, or eMoL.

However, by Canadian law, before we finalize you in the eMoL database you must
be given the option to opt-out and the ability to view and accept our privacy
policy before you make that decision. At the end of this email, you'll find a
link that will take you to the eMoL privacy policy. Give it a read and then
accept or decline it.

It's completely up to you whether you accept or decline. If you don't want
your information stored online by us, that's fine, just decline the privacy
policy. This is what happens in either case:

If You Accept
=============
We'll finalize your entry in the eMoL database and note that you accepted the
privacy policy. You will be able to:
- View your authorization card online
- Manage your information online
- Manage any new authorizations you get online
- Receive email notification when your card is getting close to expiry
- Receive email notification when your waiver on file is getting close to expiry

If You Decline
==============
We'll delete all trace of you from the eMoL database
- The MoL will track your authorizations and information manually, offline
- You will be mailed an authorization card
- When your card expires, you will have to either find the MoL in person, or
  mail them your card to be re-stamped with a new expiry date
- The MoL will track any new authorizations you get manually
- You won't get any automatic reminders about card expiry
- The MoL will still email you manually about waiver expiry

This link will take you to the privacy policy page.

http://localhost:8000/privacy-policy/HGJmEs3ASPInyQM7

Please read the policy
carefully. It explains what information we store, how we protect it, and how
we use it. As above, accept or decline it and we'll go from there!

The link will be usable for one week from the date of this email, after which
it will expire and a new one must be requested.

Ealdormere eMoL

.....[INFO] 2025-12-16 20:28:39,842 cards 41: Not sending email to test@example.com
[INFO] 2025-12-16 20:28:39,842 cards 42: Test Subject
[INFO] 2025-12-16 20:28:39,842 cards 43: Test body
.[INFO] 2025-12-16 20:28:39,843 cards 46: Sending email to test@example.com: Test
[ERROR] 2025-12-16 20:28:39,843 cards 77: Error sending mail to test@example.com
[ERROR] 2025-12-16 20:28:39,843 cards 78: An error occurred (TestError) when calling the send_email operation: Test
Traceback (most recent call last):
  File "/opt/emol/emol/emailer/__init__.py", line 74, in send_email
    response = client.send_email(**email_args)
  File "/usr/local/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
botocore.exceptions.ClientError: An error occurred (TestError) when calling the send_email operation: Test
.[INFO] 2025-12-16 20:28:39,844 cards 46: Sending email to test@example.com: Test Subject
.[INFO] 2025-12-16 20:28:39,844 cards 46: Sending email to test@example.com: Test
..........[WARNING] 2025-12-16 20:28:39,858 feature_switches.helpers 39: Feature switch 'nonexistent' does not exist, using default='False'
.....[WARNING] 2025-12-16 20:28:39,864 feature_switches.helpers 39: Feature switch 'nonexistent_feature' does not exist, using default='False'
.[WARNING] 2025-12-16 20:28:39,865 feature_switches.helpers 39: Feature switch 'nonexistent_feature' does not exist, using default='False'
...[ERROR] 2025-12-16 20:28:39,869 global_throttle 108: THROTTLING: Request count 10 exceeds limit 10 for 192.168.1.101
.[ERROR] 2025-12-16 20:28:39,872 global_throttle 108: THROTTLING: Request count 10 exceeds limit 10 for 192.168.1.100
...[ERROR] 2025-12-16 20:28:39,877 global_throttle 108: THROTTLING: Request count 20 exceeds limit 20 for 192.168.1.102
.[ERROR] 2025-12-16 20:28:39,880 global_throttle 108: THROTTLING: Request count 10 exceeds limit 10 for 192.168.1.103
................
======================================================================
ERROR: test_pin_reset_success (cards.tests.test_api.InitiatePinResetAPITestCase.test_pin_reset_success)
Successful PIN reset creates code and sends email.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/opt/emol/emol/cards/tests/test_api.py", line 394, in test_pin_reset_success
    response = self.client.post(
        reverse("initiate-pin-reset"),
        {"combatant_uuid": str(self.combatant.uuid)},
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/test.py", line 299, in post
    response = super().post(
        path, data=data, format=format, content_type=content_type, **extra)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/test.py", line 213, in post
    return self.generic('POST', path, data, content_type, **extra)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/test.py", line 237, in generic
    return super().generic(
           ~~~~~~~~~~~~~~~^
        method, path, data, content_type, secure, **extra)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 671, in generic
    return self.request(**r)
           ~~~~~~~~~~~~^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/test.py", line 289, in request
    return super().request(**kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/test.py", line 241, in request
    request = super().request(**kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 1087, in request
    self.check_exception(response)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 802, in check_exception
    raise exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/opt/emol/emol/cards/api/pin.py", line 57, in post
    reset_code = combatant.initiate_pin_reset()
  File "/opt/emol/emol/cards/models/combatant.py", line 412, in initiate_pin_reset
    return self.one_time_codes.create_pin_reset_code()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 42, in create_pin_reset_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

======================================================================
ERROR: test_superuser_can_reset_pin (cards.tests.test_api.InitiatePinResetAPITestCase.test_superuser_can_reset_pin)
Superusers can initiate PIN reset without explicit permission.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/opt/emol/emol/cards/tests/test_api.py", line 432, in test_superuser_can_reset_pin
    response = self.client.post(
        reverse("initiate-pin-reset"),
        {"combatant_uuid": str(self.combatant.uuid)},
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/test.py", line 299, in post
    response = super().post(
        path, data=data, format=format, content_type=content_type, **extra)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/test.py", line 213, in post
    return self.generic('POST', path, data, content_type, **extra)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/test.py", line 237, in generic
    return super().generic(
           ~~~~~~~~~~~~~~~^
        method, path, data, content_type, secure, **extra)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 671, in generic
    return self.request(**r)
           ~~~~~~~~~~~~^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/test.py", line 289, in request
    return super().request(**kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/test.py", line 241, in request
    request = super().request(**kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 1087, in request
    self.check_exception(response)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 802, in check_exception
    raise exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/generic/base.py", line 105, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/opt/emol/emol/cards/api/pin.py", line 57, in post
    reset_code = combatant.initiate_pin_reset()
  File "/opt/emol/emol/cards/models/combatant.py", line 412, in initiate_pin_reset
    return self.one_time_codes.create_pin_reset_code()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 42, in create_pin_reset_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

======================================================================
ERROR: test_creates_one_time_codes (cards.tests.test_management_commands.PINMigrationCommandTestCase.test_creates_one_time_codes)
Test that command creates OneTimeCodes for combatants.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/utils.py", line 456, in inner
    return func(*args, **kwargs)
  File "/opt/emol/emol/cards/tests/test_management_commands.py", line 670, in test_creates_one_time_codes
    call_command("pin_migration", "--stage=initial")
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/__init__.py", line 194, in call_command
    return command.execute(*args, **defaults)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 460, in execute
    output = self.handle(*args, **options)
  File "/opt/emol/emol/cards/management/commands/pin_migration.py", line 85, in handle
    self.stdout.write(self.style.ERROR("Errors: %s", error_count))
                      ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: make_style.<locals>.<lambda>() takes 1 positional argument but 2 were given

======================================================================
ERROR: test_limit_option (cards.tests.test_management_commands.PINMigrationCommandTestCase.test_limit_option)
Test --limit option restricts number of emails.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/utils.py", line 456, in inner
    return func(*args, **kwargs)
  File "/opt/emol/emol/cards/tests/test_management_commands.py", line 694, in test_limit_option
    call_command("pin_migration", "--limit=1")
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/__init__.py", line 194, in call_command
    return command.execute(*args, **defaults)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 460, in execute
    output = self.handle(*args, **options)
  File "/opt/emol/emol/cards/management/commands/pin_migration.py", line 85, in handle
    self.stdout.write(self.style.ERROR("Errors: %s", error_count))
                      ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: make_style.<locals>.<lambda>() takes 1 positional argument but 2 were given

======================================================================
ERROR: test_initiate_pin_reset (cards.tests.test_models.test_combatant.CombatantPINTestCase.test_initiate_pin_reset)
Test initiating PIN reset creates OneTimeCode and clears PIN.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/utils.py", line 456, in inner
    return func(*args, **kwargs)
  File "/opt/emol/emol/cards/tests/test_models/test_combatant.py", line 218, in test_initiate_pin_reset
    one_time_code = self.combatant.initiate_pin_reset()
  File "/opt/emol/emol/cards/models/combatant.py", line 412, in initiate_pin_reset
    return self.one_time_codes.create_pin_reset_code()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 42, in create_pin_reset_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

======================================================================
ERROR: test_hygiene_checks_waivers (cards.tests.test_reminders.ReminderHygieneCommandTestCase.test_hygiene_checks_waivers)
Hygiene command checks waivers too.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/utils.py", line 456, in inner
    return func(*args, **kwargs)
  File "/opt/emol/emol/cards/tests/test_reminders.py", line 465, in test_hygiene_checks_waivers
    call_command("reminder_hygiene", "--fix")
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/__init__.py", line 194, in call_command
    return command.execute(*args, **defaults)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 460, in execute
    output = self.handle(*args, **options)
  File "/opt/emol/emol/cards/management/commands/reminder_hygiene.py", line 41, in handle
    issues_found += self._check_model(
                    ~~~~~~~~~~~~~~~~~^
        Waiver, waiver_ct, "waivers", reminder_days, today, fix
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/emol/emol/cards/management/commands/reminder_hygiene.py", line 85, in _check_model
    self.stdout.write("Checking %s active %s...", len(active_items), label)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 181, in write
    self._out.write(style_func(msg))
                    ~~~~~~~~~~^^^^^
TypeError: 'int' object is not callable

======================================================================
ERROR: test_hygiene_fix_creates_missing_reminders (cards.tests.test_reminders.ReminderHygieneCommandTestCase.test_hygiene_fix_creates_missing_reminders)
Hygiene command with --fix creates missing reminders.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/utils.py", line 456, in inner
    return func(*args, **kwargs)
  File "/opt/emol/emol/cards/tests/test_reminders.py", line 414, in test_hygiene_fix_creates_missing_reminders
    call_command("reminder_hygiene", "--fix")
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/__init__.py", line 194, in call_command
    return command.execute(*args, **defaults)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 460, in execute
    output = self.handle(*args, **options)
  File "/opt/emol/emol/cards/management/commands/reminder_hygiene.py", line 38, in handle
    issues_found += self._check_model(
                    ~~~~~~~~~~~~~~~~~^
        Card, card_ct, "cards", reminder_days, today, fix
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/emol/emol/cards/management/commands/reminder_hygiene.py", line 85, in _check_model
    self.stdout.write("Checking %s active %s...", len(active_items), label)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 181, in write
    self._out.write(style_func(msg))
                    ~~~~~~~~~~^^^^^
TypeError: 'int' object is not callable

======================================================================
ERROR: test_hygiene_no_issues_with_healthy_data (cards.tests.test_reminders.ReminderHygieneCommandTestCase.test_hygiene_no_issues_with_healthy_data)
Hygiene command reports no issues when data is healthy.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/utils.py", line 456, in inner
    return func(*args, **kwargs)
  File "/opt/emol/emol/cards/tests/test_reminders.py", line 440, in test_hygiene_no_issues_with_healthy_data
    call_command("reminder_hygiene")
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/__init__.py", line 194, in call_command
    return command.execute(*args, **defaults)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 460, in execute
    output = self.handle(*args, **options)
  File "/opt/emol/emol/cards/management/commands/reminder_hygiene.py", line 38, in handle
    issues_found += self._check_model(
                    ~~~~~~~~~~~~~~~~~^
        Card, card_ct, "cards", reminder_days, today, fix
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/emol/emol/cards/management/commands/reminder_hygiene.py", line 85, in _check_model
    self.stdout.write("Checking %s active %s...", len(active_items), label)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 181, in write
    self._out.write(style_func(msg))
                    ~~~~~~~~~~^^^^^
TypeError: 'int' object is not callable

======================================================================
ERROR: test_hygiene_reports_missing_reminders (cards.tests.test_reminders.ReminderHygieneCommandTestCase.test_hygiene_reports_missing_reminders)
Hygiene command reports cards with missing reminders.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/utils.py", line 456, in inner
    return func(*args, **kwargs)
  File "/opt/emol/emol/cards/tests/test_reminders.py", line 401, in test_hygiene_reports_missing_reminders
    call_command("reminder_hygiene")
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/__init__.py", line 194, in call_command
    return command.execute(*args, **defaults)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 460, in execute
    output = self.handle(*args, **options)
  File "/opt/emol/emol/cards/management/commands/reminder_hygiene.py", line 38, in handle
    issues_found += self._check_model(
                    ~~~~~~~~~~~~~~~~~^
        Card, card_ct, "cards", reminder_days, today, fix
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/emol/emol/cards/management/commands/reminder_hygiene.py", line 85, in _check_model
    self.stdout.write("Checking %s active %s...", len(active_items), label)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 181, in write
    self._out.write(style_func(msg))
                    ~~~~~~~~~~^^^^^
TypeError: 'int' object is not callable

======================================================================
ERROR: test_hygiene_reports_orphaned_reminders (cards.tests.test_reminders.ReminderHygieneCommandTestCase.test_hygiene_reports_orphaned_reminders)
Hygiene command reports orphaned reminders.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/utils.py", line 456, in inner
    return func(*args, **kwargs)
  File "/opt/emol/emol/cards/tests/test_reminders.py", line 429, in test_hygiene_reports_orphaned_reminders
    call_command("reminder_hygiene")
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/__init__.py", line 194, in call_command
    return command.execute(*args, **defaults)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/management/base.py", line 460, in execute
    output = self.handle(*args, **options)
  File "/opt/emol/emol/cards/management/commands/reminder_hygiene.py", line 44, in handle
    issues_found += self._check_orphaned_reminders()
                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/emol/emol/cards/management/commands/reminder_hygiene.py", line 126, in _check_orphaned_reminders
    self.style.WARNING("  Found %s orphaned reminders", len(orphaned))
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: make_style.<locals>.<lambda>() takes 1 positional argument but 2 were given

======================================================================
ERROR: test_update_info_post_creates_new_code (cards.tests.test_views_home.HomeViewsTestCase.test_update_info_post_creates_new_code)
Test POST request always creates a new OneTimeCode
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/opt/emol/emol/cards/tests/test_views_home.py", line 125, in test_update_info_post_creates_new_code
    response = self.client.post(
        reverse("update-info"), {"update-info-email": "test@example.com"}
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 1153, in post
    response = super().post(
        path,
    ...<5 lines>...
        **extra,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 499, in post
    return self.generic(
           ~~~~~~~~~~~~^
        "POST",
        ^^^^^^^
    ...<6 lines>...
        **extra,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 671, in generic
    return self.request(**r)
           ~~~~~~~~~~~~^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 1087, in request
    self.check_exception(response)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 802, in check_exception
    raise exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/utils/decorators.py", line 192, in _view_wrapper
    result = _process_exception(request, e)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/utils/decorators.py", line 190, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/decorators/http.py", line 64, in inner
    return func(request, *args, **kwargs)
  File "/opt/emol/emol/cards/views/home.py", line 140, in update_info
    code = combatant.one_time_codes.create_info_update_code()
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 22, in create_info_update_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

======================================================================
ERROR: test_update_info_post_existing_combatant_with_privacy (cards.tests.test_views_home.HomeViewsTestCase.test_update_info_post_existing_combatant_with_privacy)
Test POST request for existing combatant who accepted privacy policy
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/opt/emol/emol/cards/tests/test_views_home.py", line 101, in test_update_info_post_existing_combatant_with_privacy
    response = self.client.post(
        reverse("update-info"), {"update-info-email": "test@example.com"}
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 1153, in post
    response = super().post(
        path,
    ...<5 lines>...
        **extra,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 499, in post
    return self.generic(
           ~~~~~~~~~~~~^
        "POST",
        ^^^^^^^
    ...<6 lines>...
        **extra,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 671, in generic
    return self.request(**r)
           ~~~~~~~~~~~~^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 1087, in request
    self.check_exception(response)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 802, in check_exception
    raise exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/utils/decorators.py", line 192, in _view_wrapper
    result = _process_exception(request, e)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/utils/decorators.py", line 190, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/decorators/http.py", line 64, in inner
    return func(request, *args, **kwargs)
  File "/opt/emol/emol/cards/views/home.py", line 140, in update_info
    code = combatant.one_time_codes.create_info_update_code()
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 22, in create_info_update_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

======================================================================
ERROR: test_privacy_policy_accept_with_pin_enabled (cards.tests.test_views_privacy.PrivacyPolicyViewTestCase.test_privacy_policy_accept_with_pin_enabled)
POST with accept redirects to PIN setup when PIN is enabled.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/utils.py", line 456, in inner
    return func(*args, **kwargs)
  File "/opt/emol/emol/cards/tests/test_views_privacy.py", line 61, in test_privacy_policy_accept_with_pin_enabled
    response = self.client.post(
        reverse("privacy-policy", kwargs={"code": code}),
        {"code": code, "accept": "1"},
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 1153, in post
    response = super().post(
        path,
    ...<5 lines>...
        **extra,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 499, in post
    return self.generic(
           ~~~~~~~~~~~~^
        "POST",
        ^^^^^^^
    ...<6 lines>...
        **extra,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 671, in generic
    return self.request(**r)
           ~~~~~~~~~~~~^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 1087, in request
    self.check_exception(response)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/test/client.py", line 802, in check_exception
    raise exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/views/decorators/http.py", line 64, in inner
    return func(request, *args, **kwargs)
  File "/opt/emol/emol/cards/views/privacy.py", line 34, in privacy_policy
    pin_code = combatant.one_time_codes.create_pin_setup_code()
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/emol/emol/cards/models/one_time_code.py", line 32, in create_pin_setup_code
    self.create(
    ~~~~~~~~~~~^
        url_template=url_template,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ),
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 665, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/query.py", line 1873, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/django/db/backends/mysql/base.py", line 76, in execute
    return self.cursor.execute(query, args)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/root/.cache/pypoetry/virtualenvs/emol-z4f9qes0-py3.13/lib/python3.13/site-packages/MySQLdb/connections.py", line 280, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: (1048, "Column 'combatant_id' cannot be null")

======================================================================
FAIL: test_get_invalid_code (cards.tests.test_self_serve_update.SelfServeUpdateViewTestCase.test_get_invalid_code)
Test GET request with invalid update code
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/opt/emol/emol/cards/tests/test_self_serve_update.py", line 292, in test_get_invalid_code
    self.assertContains(
    ~~~~~~~~~~~~~~~~~~~^
        response, "The update code provided is invalid or has already been used."
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
AssertionError: False is not true : Couldn't find 'The update code provided is invalid or has already been used.' in the following response
b'<!DOCTYPE html>\n\n\n\n\n<html>\n\n<head>\n  <title>eMoL</title>\n  <meta name="viewport"\n    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">\n  <!--\n    <link rel="apple-touch-icon" sizes="180x180" href="/static/cards/favicon/apple-touch-icon.png">\n    <link rel="icon" type="image/png" sizes="32x32" href="/static/cards/favicon/favicon-32x32.png">\n    <link rel="icon" type="image/png" sizes="16x16" href="/static/cards/favicon/favicon-16x16.png">\n    <link rel="icon" type="image/png" sizes="192x192" href="/static/cards/favicon/android-chrome-192x192.png">\n    <link rel="icon" type="image/png" sizes="512x512" href="/static/cards/favicon/android-chrome-512x512.png">\n    <link rel="manifest" href="/static/cards/favicon/site.webmanifest">\n    -->\n  \n\n<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"\n  integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r6ubwVPSGB2GvjeoMAJJImBG12TiaQ=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"\n  integrity="sha512-0bEtK0USNd96MnO4XhH8jhv3nyRF0eK87pJke6pkYf3cM0uDIhNJy9ltuzqgypoIFXw3JSuiy04tVk4AjpZdZw=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.4/jquery.validate.min.js"\n  integrity="sha512-FOhq9HThdn7ltbK8abmGn60A/EMtEzIzv1rvuh+DqzJtSGq8BRdEN0U+j0iKEIffiw/yEtVuladk6rsG4X6Uqg=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"\n  integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/multi.js/0.5.3/multi.min.js"\n  integrity="sha512-fKrglrPxMbF91wKO9A728mqY2iT+pP0bT894gEtlhTfNAnZs+mJTIhtqwqq1FaLJ5F+RhQ6mL+oB5yUMHt355g=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"\n  integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n\n<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"\n  integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">\n<link rel="stylesheet"\n  href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"\n  integrity="sha512-mSYUmp1HYZDFaVKK//63EcZq4iFWFjxSL+Z3T/aCt4IO9Cejm03q3NKKYN6pFQzY0SBOr8h+eCIAZHPXcpZaNw=="\n  crossorigin="anonymous" referrerpolicy="no-referrer" />\n<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"\n  integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/multi.js/0.5.3/multi.min.css"\n  integrity="sha512-WZB6zKj9W88GPcUSeFF3koytqDhtkArAs9qYGR1LqP6OIWxjRSFY0Yb8dA31rKnvRM6acByJNMAdfCvrQ+cp9w=="\n  crossorigin="anonymous" referrerpolicy="no-referrer" />\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"\n  integrity="sha512-vKMx8UnXk60zUwyUnUPM3HbQo8QfmNx7+ltw8Pm5zLusl1XIfwcxo8DbWCqMGKaWeNxWA8yrx5v3SaVpMvR3CA=="\n  crossorigin="anonymous" referrerpolicy="no-referrer" />\n\n<script src="/static/cards/javascript/messages.js"></script>\n<script src="/static/cards/javascript/global.js"></script>\n<script src="/static/cards/javascript/datepicker.js"></script>\n<link rel="stylesheet" type="text/css" href="/static/cards/css/site.css">\n  \n</head>\n\n<body>\n  <header>\n    \n\n\n<nav class="navbar">\n  <div class="container-fluid">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">\n        <i class="fa fa-bars fa-2"></i>\n      </button>\n      <a class="navbar-brand" href="/"><span><img\n            src="/static/cards/images/ealdormere32.png" />&nbsp;eMoL</span></a>\n    </div>\n    <div class="collapse navbar-collapse" id="navbar">\n      <ul class="nav navbar-nav">\n        \n      </ul>\n\n      <ul class="nav navbar-nav  navbar-right">\n        \n\n        \n        <li><a href="/auth/login">Sign In</a></li>\n        \n      </ul>\n    </div>\n  </div>\n</nav>\n\n  </header>\n\n  <div class="content-wrapper">\n    <div class="container">\n      \n    <div class="row"></div>\n  <div class="row">\n    <div id="message-text" class="col-md-12 text-center">\n        The update code provided is invalid or is already used.\n    </div>\n</div>\n<div class="row">\n    <div class="row top-space-lg">\n        <div class="col-md-12 text-center" style="margin-left:15px;">\n            <a id="home" class="btn btn-md btn-primary" href="/">Home</a>\n        </div>\n    </div>\n</div>\n\n\n    </div>\n  </div>\n\n  <footer class="footer">\n    <nav class="navbar">\n      <div class="container-fluid top-border">\n        <div class="text-muted col-sm-3">\n          Copyright &copy; 2025<br>\n          Kingdom of Ealdormere\n        </div>\n        <div class="content-centered col-sm-6">\n          \n        </div>\n        <div class="text-muted right col-sm-3">\n          <a href="/privacy-policy">Privacy</a><br>\n          \n          <small>v1.3.0-beta.2</small>\n        </div>\n      </div>\n    </nav>\n  </footer>\n</body>\n\n</html>\n'

======================================================================
FAIL: test_get_nonexistent_code (cards.tests.test_self_serve_update.SelfServeUpdateViewTestCase.test_get_nonexistent_code)
Test GET request with non-existent update code
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/opt/emol/emol/cards/tests/test_self_serve_update.py", line 303, in test_get_nonexistent_code
    self.assertContains(
    ~~~~~~~~~~~~~~~~~~~^
        response, "The update code provided is invalid or has already been used."
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
AssertionError: False is not true : Couldn't find 'The update code provided is invalid or has already been used.' in the following response
b'<!DOCTYPE html>\n\n\n\n\n<html>\n\n<head>\n  <title>eMoL</title>\n  <meta name="viewport"\n    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">\n  <!--\n    <link rel="apple-touch-icon" sizes="180x180" href="/static/cards/favicon/apple-touch-icon.png">\n    <link rel="icon" type="image/png" sizes="32x32" href="/static/cards/favicon/favicon-32x32.png">\n    <link rel="icon" type="image/png" sizes="16x16" href="/static/cards/favicon/favicon-16x16.png">\n    <link rel="icon" type="image/png" sizes="192x192" href="/static/cards/favicon/android-chrome-192x192.png">\n    <link rel="icon" type="image/png" sizes="512x512" href="/static/cards/favicon/android-chrome-512x512.png">\n    <link rel="manifest" href="/static/cards/favicon/site.webmanifest">\n    -->\n  \n\n<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"\n  integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r6ubwVPSGB2GvjeoMAJJImBG12TiaQ=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"\n  integrity="sha512-0bEtK0USNd96MnO4XhH8jhv3nyRF0eK87pJke6pkYf3cM0uDIhNJy9ltuzqgypoIFXw3JSuiy04tVk4AjpZdZw=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.4/jquery.validate.min.js"\n  integrity="sha512-FOhq9HThdn7ltbK8abmGn60A/EMtEzIzv1rvuh+DqzJtSGq8BRdEN0U+j0iKEIffiw/yEtVuladk6rsG4X6Uqg=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"\n  integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/multi.js/0.5.3/multi.min.js"\n  integrity="sha512-fKrglrPxMbF91wKO9A728mqY2iT+pP0bT894gEtlhTfNAnZs+mJTIhtqwqq1FaLJ5F+RhQ6mL+oB5yUMHt355g=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"\n  integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n\n<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"\n  integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">\n<link rel="stylesheet"\n  href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"\n  integrity="sha512-mSYUmp1HYZDFaVKK//63EcZq4iFWFjxSL+Z3T/aCt4IO9Cejm03q3NKKYN6pFQzY0SBOr8h+eCIAZHPXcpZaNw=="\n  crossorigin="anonymous" referrerpolicy="no-referrer" />\n<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"\n  integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/multi.js/0.5.3/multi.min.css"\n  integrity="sha512-WZB6zKj9W88GPcUSeFF3koytqDhtkArAs9qYGR1LqP6OIWxjRSFY0Yb8dA31rKnvRM6acByJNMAdfCvrQ+cp9w=="\n  crossorigin="anonymous" referrerpolicy="no-referrer" />\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"\n  integrity="sha512-vKMx8UnXk60zUwyUnUPM3HbQo8QfmNx7+ltw8Pm5zLusl1XIfwcxo8DbWCqMGKaWeNxWA8yrx5v3SaVpMvR3CA=="\n  crossorigin="anonymous" referrerpolicy="no-referrer" />\n\n<script src="/static/cards/javascript/messages.js"></script>\n<script src="/static/cards/javascript/global.js"></script>\n<script src="/static/cards/javascript/datepicker.js"></script>\n<link rel="stylesheet" type="text/css" href="/static/cards/css/site.css">\n  \n</head>\n\n<body>\n  <header>\n    \n\n\n<nav class="navbar">\n  <div class="container-fluid">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">\n        <i class="fa fa-bars fa-2"></i>\n      </button>\n      <a class="navbar-brand" href="/"><span><img\n            src="/static/cards/images/ealdormere32.png" />&nbsp;eMoL</span></a>\n    </div>\n    <div class="collapse navbar-collapse" id="navbar">\n      <ul class="nav navbar-nav">\n        \n      </ul>\n\n      <ul class="nav navbar-nav  navbar-right">\n        \n\n        \n        <li><a href="/auth/login">Sign In</a></li>\n        \n      </ul>\n    </div>\n  </div>\n</nav>\n\n  </header>\n\n  <div class="content-wrapper">\n    <div class="container">\n      \n    <div class="row"></div>\n  <div class="row">\n    <div id="message-text" class="col-md-12 text-center">\n        The update code provided is invalid or is already used.\n    </div>\n</div>\n<div class="row">\n    <div class="row top-space-lg">\n        <div class="col-md-12 text-center" style="margin-left:15px;">\n            <a id="home" class="btn btn-md btn-primary" href="/">Home</a>\n        </div>\n    </div>\n</div>\n\n\n    </div>\n  </div>\n\n  <footer class="footer">\n    <nav class="navbar">\n      <div class="container-fluid top-border">\n        <div class="text-muted col-sm-3">\n          Copyright &copy; 2025<br>\n          Kingdom of Ealdormere\n        </div>\n        <div class="content-centered col-sm-6">\n          \n        </div>\n        <div class="text-muted right col-sm-3">\n          <a href="/privacy-policy">Privacy</a><br>\n          \n          <small>v1.3.0-beta.2</small>\n        </div>\n      </div>\n    </nav>\n  </footer>\n</body>\n\n</html>\n'

======================================================================
FAIL: test_post_invalid_code (cards.tests.test_self_serve_update.SelfServeUpdateViewTestCase.test_post_invalid_code)
Test POST request with invalid update code
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/opt/emol/emol/cards/tests/test_self_serve_update.py", line 461, in test_post_invalid_code
    self.assertContains(
    ~~~~~~~~~~~~~~~~~~~^
        response, "The update code provided is invalid or has already been used."
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
AssertionError: False is not true : Couldn't find 'The update code provided is invalid or has already been used.' in the following response
b'<!DOCTYPE html>\n\n\n\n\n<html>\n\n<head>\n  <title>eMoL</title>\n  <meta name="viewport"\n    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">\n  <!--\n    <link rel="apple-touch-icon" sizes="180x180" href="/static/cards/favicon/apple-touch-icon.png">\n    <link rel="icon" type="image/png" sizes="32x32" href="/static/cards/favicon/favicon-32x32.png">\n    <link rel="icon" type="image/png" sizes="16x16" href="/static/cards/favicon/favicon-16x16.png">\n    <link rel="icon" type="image/png" sizes="192x192" href="/static/cards/favicon/android-chrome-192x192.png">\n    <link rel="icon" type="image/png" sizes="512x512" href="/static/cards/favicon/android-chrome-512x512.png">\n    <link rel="manifest" href="/static/cards/favicon/site.webmanifest">\n    -->\n  \n\n<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"\n  integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r6ubwVPSGB2GvjeoMAJJImBG12TiaQ=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"\n  integrity="sha512-0bEtK0USNd96MnO4XhH8jhv3nyRF0eK87pJke6pkYf3cM0uDIhNJy9ltuzqgypoIFXw3JSuiy04tVk4AjpZdZw=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.4/jquery.validate.min.js"\n  integrity="sha512-FOhq9HThdn7ltbK8abmGn60A/EMtEzIzv1rvuh+DqzJtSGq8BRdEN0U+j0iKEIffiw/yEtVuladk6rsG4X6Uqg=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"\n  integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/multi.js/0.5.3/multi.min.js"\n  integrity="sha512-fKrglrPxMbF91wKO9A728mqY2iT+pP0bT894gEtlhTfNAnZs+mJTIhtqwqq1FaLJ5F+RhQ6mL+oB5yUMHt355g=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"\n  integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw=="\n  crossorigin="anonymous" referrerpolicy="no-referrer"></script>\n\n<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"\n  integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">\n<link rel="stylesheet"\n  href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"\n  integrity="sha512-mSYUmp1HYZDFaVKK//63EcZq4iFWFjxSL+Z3T/aCt4IO9Cejm03q3NKKYN6pFQzY0SBOr8h+eCIAZHPXcpZaNw=="\n  crossorigin="anonymous" referrerpolicy="no-referrer" />\n<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"\n  integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/multi.js/0.5.3/multi.min.css"\n  integrity="sha512-WZB6zKj9W88GPcUSeFF3koytqDhtkArAs9qYGR1LqP6OIWxjRSFY0Yb8dA31rKnvRM6acByJNMAdfCvrQ+cp9w=="\n  crossorigin="anonymous" referrerpolicy="no-referrer" />\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"\n  integrity="sha512-vKMx8UnXk60zUwyUnUPM3HbQo8QfmNx7+ltw8Pm5zLusl1XIfwcxo8DbWCqMGKaWeNxWA8yrx5v3SaVpMvR3CA=="\n  crossorigin="anonymous" referrerpolicy="no-referrer" />\n\n<script src="/static/cards/javascript/messages.js"></script>\n<script src="/static/cards/javascript/global.js"></script>\n<script src="/static/cards/javascript/datepicker.js"></script>\n<link rel="stylesheet" type="text/css" href="/static/cards/css/site.css">\n  \n</head>\n\n<body>\n  <header>\n    \n\n\n<nav class="navbar">\n  <div class="container-fluid">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">\n        <i class="fa fa-bars fa-2"></i>\n      </button>\n      <a class="navbar-brand" href="/"><span><img\n            src="/static/cards/images/ealdormere32.png" />&nbsp;eMoL</span></a>\n    </div>\n    <div class="collapse navbar-collapse" id="navbar">\n      <ul class="nav navbar-nav">\n        \n      </ul>\n\n      <ul class="nav navbar-nav  navbar-right">\n        \n\n        \n        <li><a href="/auth/login">Sign In</a></li>\n        \n      </ul>\n    </div>\n  </div>\n</nav>\n\n  </header>\n\n  <div class="content-wrapper">\n    <div class="container">\n      \n    <div class="row"></div>\n  <div class="row">\n    <div id="message-text" class="col-md-12 text-center">\n        The update code provided is invalid or is already used.\n    </div>\n</div>\n<div class="row">\n    <div class="row top-space-lg">\n        <div class="col-md-12 text-center" style="margin-left:15px;">\n            <a id="home" class="btn btn-md btn-primary" href="/">Home</a>\n        </div>\n    </div>\n</div>\n\n\n    </div>\n  </div>\n\n  <footer class="footer">\n    <nav class="navbar">\n      <div class="container-fluid top-border">\n        <div class="text-muted col-sm-3">\n          Copyright &copy; 2025<br>\n          Kingdom of Ealdormere\n        </div>\n        <div class="content-centered col-sm-6">\n          \n        </div>\n        <div class="text-muted right col-sm-3">\n          <a href="/privacy-policy">Privacy</a><br>\n          \n          <small>v1.3.0-beta.2</small>\n        </div>\n      </div>\n    </nav>\n  </footer>\n</body>\n\n</html>\n'

----------------------------------------------------------------------
Ran 271 tests in 9.649s

FAILED (failures=3, errors=13)
Destroying test database for alias 'default'...
make: *** [Makefile:112: test] Error 1
